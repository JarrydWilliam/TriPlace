@tailwind base;
@tailwind components;
@tailwind utilities;

/* Mobile-first base styles - prevent horizontal scroll and overscroll */
html, body {
  overflow-x: hidden;
  overflow-y: auto;
  width: 100%;
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
  overscroll-behavior: none;
  -webkit-overscroll-behavior: none;
  -ms-overflow-style: none;
  scrollbar-width: none;
}

body {
  position: relative;
  min-height: 100vh;
  min-height: 100dvh; /* Dynamic viewport height for mobile */
}

body::-webkit-scrollbar {
  display: none;
}

/* Mobile page container for optimal scrolling */
.mobile-page-container {
  position: relative;
  width: 100%;
  min-height: 100vh;
  min-height: 100dvh;
  overflow-x: hidden;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: none;
  -webkit-overscroll-behavior: none;
  touch-action: pan-y;
}

/* Mobile scroll wrapper for content areas */
.mobile-scroll-wrapper {
  position: relative;
  width: 100%;
  height: 100%;
  overflow-y: auto;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-y: none;
}

/* Pull-to-refresh styles */
.pull-to-refresh {
  position: relative;
  overflow: hidden;
}

.pull-to-refresh-indicator {
  position: absolute;
  top: -60px;
  left: 50%;
  transform: translateX(-50%);
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--background);
  border-radius: 50%;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
  z-index: 50;
}

.pull-to-refresh-indicator.visible {
  top: 10px;
}

.pull-to-refresh-indicator.refreshing {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from { transform: translateX(-50%) rotate(0deg); }
  to { transform: translateX(-50%) rotate(360deg); }
}

/* Responsive padding system */
.responsive-padding {
  padding: 0.75rem; /* 12px base */
}

@media (min-width: 375px) {
  .responsive-padding {
    padding: 1rem; /* 16px on larger phones */
  }
}

@media (min-width: 768px) {
  .responsive-padding {
    padding: 1.5rem; /* 24px on tablets */
  }
}

@media (min-width: 1024px) {
  .responsive-padding {
    padding: 2rem; /* 32px on desktop */
  }
}

@media (min-width: 1440px) {
  .responsive-padding {
    padding: 2.5rem; /* 40px on large screens */
  }
}

/* Safe area support for notched devices */
.safe-area-top {
  padding-top: env(safe-area-inset-top, 0);
}

.safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom, 0);
}

.safe-area-left {
  padding-left: env(safe-area-inset-left, 0);
}

.safe-area-right {
  padding-right: env(safe-area-inset-right, 0);
}

/* Enhanced mobile scrolling and touch optimization */
.mobile-page-container {
  min-height: 100vh;
  min-height: 100dvh; /* Dynamic viewport height for mobile */
  overflow-x: hidden;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: none;
  touch-action: pan-y;
  transform: translateZ(0); /* Hardware acceleration */
  will-change: scroll-position;
}

/* Prevent scroll lock issues */
body, html {
  position: relative;
  overflow-x: hidden;
  scroll-behavior: smooth;
}

/* Enhanced button accessibility for mobile */
.mobile-touch-target {
  min-height: 44px;
  min-width: 44px;
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}

/* Fix viewport and layout overflow issues */
.viewport-container {
  width: 100vw;
  max-width: 100%;
  overflow-x: hidden;
  position: relative;
}

/* iOS Safari specific fixes */
@supports (-webkit-touch-callout: none) {
  .mobile-page-container {
    min-height: -webkit-fill-available;
  }
  
  /* Fix for iOS Safari bounce effect */
  .no-bounce {
    overscroll-behavior: none;
    -webkit-overflow-scrolling: touch;
  }
}

/* Enhanced safe area handling */
.safe-area-full {
  padding-top: env(safe-area-inset-top, 0);
  padding-bottom: env(safe-area-inset-bottom, 0);
  padding-left: env(safe-area-inset-left, 0);
  padding-right: env(safe-area-inset-right, 0);
}

/* Button positioning fixes for mobile */
.mobile-button-container {
  padding: env(safe-area-inset-bottom, 16px) env(safe-area-inset-right, 16px) 16px env(safe-area-inset-left, 16px);
}

/* Ensure content doesn't go behind notch */
.content-safe {
  margin-top: env(safe-area-inset-top, 0);
  margin-bottom: env(safe-area-inset-bottom, 0);
}

/* Container width system for different screen sizes */
.container-responsive {
  width: 100%;
  max-width: 100%;
  margin: 0 auto;
}

@media (min-width: 640px) {
  .container-responsive {
    max-width: 640px;
  }
}

@media (min-width: 768px) {
  .container-responsive {
    max-width: 768px;
  }
}

@media (min-width: 1024px) {
  .container-responsive {
    max-width: 1024px;
  }
}

@media (min-width: 1280px) {
  .container-responsive {
    max-width: 1200px;
  }
}

/* Flexible grid system */
.grid-responsive {
  display: grid;
  gap: 1rem;
  grid-template-columns: 1fr;
}

@media (min-width: 640px) {
  .grid-responsive {
    grid-template-columns: repeat(2, 1fr);
    gap: 1.25rem;
  }
}

@media (min-width: 1024px) {
  .grid-responsive {
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
  }
}

@media (min-width: 1440px) {
  .grid-responsive {
    grid-template-columns: repeat(4, 1fr);
    gap: 2rem;
  }
}

/* Prevent pull-to-refresh on mobile */
.no-pull-refresh {
  overscroll-behavior-y: contain;
  -webkit-overscroll-behavior-y: contain;
}

/* WebView optimization for native app experience */
@media (hover: none) and (pointer: coarse) {
  html, body {
    -webkit-user-select: none;
    -webkit-touch-callout: none;
    -webkit-tap-highlight-color: transparent;
    user-zoom: fixed;
    zoom: 1;
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
  }
  
  /* Disable zoom and double-tap zoom */
  * {
    -webkit-user-select: none;
    -webkit-touch-callout: none;
    -webkit-tap-highlight-color: transparent;
  }
  
  /* Enable selection for inputs */
  input, textarea, [contenteditable] {
    -webkit-user-select: auto;
    user-select: auto;
  }
  
  /* Enhanced scrolling for content areas */
  .mobile-scroll-area {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: none;
    scroll-behavior: smooth;
  }
  
  /* Keyboard handling for mobile */
  input, textarea, select {
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
  }
}

/* Enhanced responsive design for all devices */
@supports (viewport-fit: cover) {
  .safe-area-top { padding-top: env(safe-area-inset-top); }
  .safe-area-bottom { padding-bottom: env(safe-area-inset-bottom); }
  .safe-area-left { padding-left: env(safe-area-inset-left); }
  .safe-area-right { padding-right: env(safe-area-inset-right); }
}

/* Mobile-first touch-friendly design */
* {
  -webkit-tap-highlight-color: transparent;
  box-sizing: border-box;
}

/* Touch-friendly responsive scaling - minimum 44px touch targets */
button, [role="button"], input, textarea, select, a {
  min-height: 44px;
  min-width: 44px;
  touch-action: manipulation;
}

/* Remove hover effects on touch devices */
@media (hover: none) and (pointer: coarse) {
  .hover\:bg-gray-800:hover {
    background-color: inherit;
  }
  
  .hover\:scale-105:hover {
    transform: none;
  }
  
  /* Larger text and spacing for mobile */
  .mobile-text-lg {
    font-size: 1.125rem;
    line-height: 1.75rem;
  }
  
  .mobile-p-4 {
    padding: 1rem;
  }
  
  .mobile-gap-4 {
    gap: 1rem;
  }
}

/* Ultra-wide screen support */
@media (min-width: 1920px) {
  .container {
    max-width: 1400px;
  }
}

/* Foldable device support */
@media (min-width: 768px) and (max-width: 1024px) and (orientation: landscape) {
  .dual-screen-layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
  }
}

:root {
  /* Warm welcome background - soft cream/ivory */
  --background: hsl(50, 80%, 98%);
  --foreground: hsl(20, 95%, 12%);
  
  /* Muted elements - warm beige tones */
  --muted: hsl(45, 65%, 90%);
  --muted-foreground: hsl(25, 55%, 35%);
  
  /* Popovers - light cream */
  --popover: hsl(48, 70%, 96%);
  --popover-foreground: hsl(20, 95%, 12%);
  
  /* Cards - soft peach/cream */
  --card: hsl(40, 75%, 94%);
  --card-foreground: hsl(20, 90%, 15%);
  
  /* Borders - warm golden tones */
  --border: hsl(35, 60%, 80%);
  --input: hsl(35, 55%, 85%);
  
  /* Primary - vibrant orange accent */
  --primary: hsl(25, 95%, 55%);
  --primary-foreground: hsl(50, 80%, 98%);
  
  /* Secondary - golden yellow */
  --secondary: hsl(45, 85%, 70%);
  --secondary-foreground: hsl(20, 90%, 20%);
  
  /* Accent - bright sunny yellow */
  --accent: hsl(55, 90%, 65%);
  --accent-foreground: hsl(20, 95%, 15%);
  
  /* Destructive - warm red-orange */
  --destructive: hsl(10, 85%, 55%);
  --destructive-foreground: hsl(50, 80%, 98%);
  
  /* Ring focus - orange accent */
  --ring: hsl(25, 95%, 55%);
  --radius: 0.5rem;
  
  /* Charts - warm spectrum */
  --chart-1: hsl(15, 90%, 60%);
  --chart-2: hsl(30, 85%, 65%);
  --chart-3: hsl(45, 80%, 60%);
  --chart-4: hsl(55, 75%, 55%);
  --chart-5: hsl(35, 95%, 70%);
  
  /* Sidebar - warm cream tones */
  --sidebar-background: hsl(42, 70%, 92%);
  --sidebar-foreground: hsl(20, 90%, 20%);
  --sidebar-primary: hsl(25, 95%, 55%);
  --sidebar-primary-foreground: hsl(50, 80%, 98%);
  --sidebar-accent: hsl(45, 80%, 75%);
  --sidebar-accent-foreground: hsl(20, 90%, 20%);
  --sidebar-border: hsl(35, 60%, 80%);
  --sidebar-ring: hsl(35, 55%, 85%);
}

.dark {
  --background: hsl(220, 25%, 8%);
  --foreground: hsl(190, 20%, 92%);
  --muted: hsl(215, 20%, 18%);
  --muted-foreground: hsl(200, 15%, 65%);
  --popover: hsl(218, 22%, 12%);
  --popover-foreground: hsl(190, 20%, 92%);
  --card: hsl(216, 24%, 14%);
  --card-foreground: hsl(190, 20%, 90%);
  --border: hsl(210, 18%, 25%);
  --input: hsl(210, 18%, 22%);
  --primary: hsl(180, 85%, 45%);
  --primary-foreground: hsl(220, 25%, 8%);
  --secondary: hsl(195, 30%, 35%);
  --secondary-foreground: hsl(190, 20%, 92%);
  --accent: hsl(170, 70%, 40%);
  --accent-foreground: hsl(190, 20%, 92%);
  --destructive: hsl(350, 75%, 55%);
  --destructive-foreground: hsl(190, 20%, 92%);
  --ring: hsl(180, 85%, 45%);
  --chart-1: hsl(200, 85%, 60%);
  --chart-2: hsl(160, 70%, 50%);
  --chart-3: hsl(240, 60%, 65%);
  --chart-4: hsl(280, 70%, 60%);
  --chart-5: hsl(320, 65%, 55%);
  --sidebar-background: hsl(218, 22%, 12%);
  --sidebar-foreground: hsl(190, 20%, 85%);
  --sidebar-primary: hsl(180, 85%, 45%);
  --sidebar-primary-foreground: hsl(220, 25%, 8%);
  --sidebar-accent: hsl(195, 30%, 35%);
  --sidebar-accent-foreground: hsl(190, 20%, 92%);
  --sidebar-border: hsl(210, 18%, 25%);
  --sidebar-ring: hsl(210, 18%, 28%);
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply font-sans antialiased bg-background text-foreground;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  }

  /* Light mode warm color overrides for all components */
  html:not(.dark) {
    /* Message bubbles and chat elements */
    .bg-blue-100 { @apply bg-orange-100; }
    .bg-blue-50 { @apply bg-orange-50; }
    .text-blue-600 { @apply text-orange-600; }
    .text-blue-700 { @apply text-orange-700; }
    .border-blue-200 { @apply border-orange-200; }
    
    /* Gray elements to warm tones */
    .bg-gray-50 { @apply bg-orange-50; }
    .bg-gray-100 { @apply bg-orange-100; }
    .bg-gray-200 { @apply bg-orange-200; }
    .text-gray-600 { @apply text-orange-600; }
    .text-gray-700 { @apply text-orange-700; }
    .text-gray-800 { @apply text-orange-800; }
    .text-gray-900 { @apply text-orange-900; }
    .border-gray-200 { @apply border-orange-200; }
    .border-gray-300 { @apply border-orange-300; }
    
    /* Success states to warm greens */
    .bg-green-100 { @apply bg-yellow-100; }
    .text-green-600 { @apply text-yellow-600; }
    .text-green-700 { @apply text-yellow-700; }
    
    /* Warning states to warm oranges */
    .bg-yellow-100 { @apply bg-orange-100; }
    .text-yellow-600 { @apply text-orange-600; }
    
    /* Purple accents to warm oranges */
    .bg-purple-100 { @apply bg-orange-100; }
    .text-purple-600 { @apply text-orange-600; }
    .border-purple-200 { @apply border-orange-200; }
    
    /* Neutral backgrounds to cream */
    .bg-white { background-color: hsl(50, 80%, 98%) !important; }
    .bg-slate-50 { @apply bg-orange-50; }
    .bg-slate-100 { @apply bg-orange-100; }
    
    /* Form elements */
    input, textarea, select {
      background-color: hsl(48, 60%, 95%) !important;
      border-color: hsl(35, 60%, 80%) !important;
      color: hsl(20, 95%, 12%) !important;
    }
    
    input:focus, textarea:focus, select:focus {
      border-color: hsl(25, 95%, 55%) !important;
      box-shadow: 0 0 0 2px hsl(25, 95%, 55%, 0.2) !important;
    }
    
    /* Buttons and interactive elements */
    .hover\\:bg-gray-100:hover { @apply hover:bg-orange-100; }
    .hover\\:bg-gray-200:hover { @apply hover:bg-orange-200; }
    .hover\\:bg-blue-50:hover { @apply hover:bg-orange-50; }
    .hover\\:text-gray-900:hover { @apply hover:text-orange-900; }
    
    /* Badges and status indicators */
    .bg-indigo-100 { @apply bg-orange-100; }
    .text-indigo-600 { @apply text-orange-600; }
    .bg-emerald-100 { @apply bg-yellow-100; }
    .text-emerald-600 { @apply text-yellow-600; }
    
    /* Links and accents */
    a:not(.no-color-override) { color: hsl(25, 95%, 45%) !important; }
    a:hover:not(.no-color-override) { color: hsl(25, 95%, 35%) !important; }
    
    /* Icons and SVG elements */
    .text-blue-500 { @apply text-orange-500; }
    .text-purple-500 { @apply text-orange-500; }
    .text-indigo-500 { @apply text-orange-500; }
    
    /* Progress bars and indicators */
    .bg-blue-500 { @apply bg-orange-500; }
    .bg-indigo-500 { @apply bg-orange-500; }
    .bg-purple-500 { @apply bg-orange-500; }
    
    /* Borders for cards and containers */
    .border-slate-200 { @apply border-orange-200; }
    .border-stone-200 { @apply border-orange-200; }
    .border-neutral-200 { @apply border-orange-200; }
    
    /* Dropdown and menu backgrounds */
    .bg-slate-800 { @apply bg-orange-800; }
    .bg-gray-800 { @apply bg-orange-800; }
    .bg-gray-900 { @apply bg-orange-900; }
    
    /* Text colors for various states */
    .text-slate-600 { @apply text-orange-600; }
    .text-slate-700 { @apply text-orange-700; }
    .text-stone-600 { @apply text-orange-600; }
    .text-neutral-600 { @apply text-orange-600; }
    
    /* Ring and focus states */
    .ring-blue-500 { @apply ring-orange-500; }
    .ring-indigo-500 { @apply ring-orange-500; }
    .focus\\:ring-blue-500:focus { @apply focus:ring-orange-500; }
  }

  h1, h2, h3, h4, h5, h6 {
    @apply font-semibold;
  }

  .bg-gray-750 {
    background-color: hsl(240, 3.7%, 12%);
  }

  .bg-gray-650 {
    background-color: hsl(240, 3.7%, 18%);
  }

  .hover\:bg-gray-650:hover {
    background-color: hsl(240, 3.7%, 18%);
  }

  .hover\:bg-gray-750:hover {
    background-color: hsl(240, 3.7%, 12%);
  }

  .dark .bg-gray-750 {
    background-color: hsl(240, 3.7%, 12%);
  }

  .dark .bg-gray-650 {
    background-color: hsl(240, 3.7%, 18%);
  }

  .dark .hover\:bg-gray-650:hover {
    background-color: hsl(240, 3.7%, 18%);
  }

  .dark .hover\:bg-gray-750:hover {
    background-color: hsl(240, 3.7%, 12%);
  }
}

/* Custom scrollbar styles for dark theme */
.dark ::-webkit-scrollbar {
  width: 8px;
}

.dark ::-webkit-scrollbar-track {
  background: hsl(240, 3.7%, 15.9%);
}

.dark ::-webkit-scrollbar-thumb {
  background: hsl(240, 5%, 34%);
  border-radius: 4px;
}

.dark ::-webkit-scrollbar-thumb:hover {
  background: hsl(240, 5%, 44%);
}

/* Animation for smooth transitions */
* {
  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 150ms;
}

/* Gradient text support */
.bg-clip-text {
  -webkit-background-clip: text;
  background-clip: text;
}

/* Line clamp utilities */
.line-clamp-1 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 1;
}

.line-clamp-2 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
}

.line-clamp-3 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 3;
}

/* Soft pulse animation for community cards */
.animate-pulse-soft {
  animation: pulse-soft 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

@keyframes pulse-soft {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.95;
  }
}

/* Enhanced scroll behavior to prevent getting stuck */
.scroll-container {
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
  scroll-behavior: smooth;
  position: relative;
  min-height: 0;
  flex: 1;
}

.scroll-container::-webkit-scrollbar {
  width: 6px;
}

.scroll-container::-webkit-scrollbar-track {
  background: transparent;
}

.scroll-container::-webkit-scrollbar-thumb {
  background: rgba(156, 163, 175, 0.3);
  border-radius: 3px;
}

.scroll-container::-webkit-scrollbar-thumb:hover {
  background: rgba(156, 163, 175, 0.5);
}

/* Fix for momentum scrolling getting stuck */
.scroll-wrapper {
  position: relative;
  height: 100%;
  overflow: hidden;
}

.scroll-wrapper > .scroll-container {
  height: 100%;
  padding-bottom: 40px; /* Extra space to prevent getting stuck at bottom */
}

/* Enhanced mobile scroll prevention */
.mobile-page-container {
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: none;
  height: 100vh;
  height: 100dvh;
  scroll-behavior: smooth;
  position: relative;
  padding-bottom: 20px; /* Prevent bottom scroll stuck */
}

/* Prevent scroll bounce on iOS and fix stuck scrolling */
@media (max-width: 768px) {
  .scroll-container, .mobile-page-container {
    scroll-snap-type: none;
    -webkit-overflow-scrolling: touch;
    overscroll-behavior-y: contain;
    scrollbar-width: thin;
  }
  
  /* Ensure content has bottom margin to prevent stuck scrolling */
  .scroll-content {
    margin-bottom: env(safe-area-inset-bottom, 20px);
    padding-bottom: 20px;
  }
}
